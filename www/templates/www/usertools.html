{% load i18n %}

[ 
{% if user.is_authenticated %}
{% trans 'Logged in as' %} {{ user.first_name }} {{ user.last_name }} <a href="{% url 'logout' %}">{% trans 'log out' %}</a>
{% else %}
<a href="{% url 'login' %}">{% trans 'Log in' %}</a>
{% endif %}
]
|
<form action="{% url 'set_language' %}" method="post">{% csrf_token %}
    <input name="next" type="hidden" value="{{ redirect_to }}">
    {% trans 'Language' %}:
    <select name="language">
        {% get_current_language as LANGUAGE_CODE %}
        {% get_available_languages as LANGUAGES %}
        {% get_language_info_list for LANGUAGES as languages %}
        {% for language in languages %}
            <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
                {{ language.name_local }}
            </option>
        {% endfor %}
    </select>
    <input type="submit" value="{% trans 'Change' %}">
</form>
